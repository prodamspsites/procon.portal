<tal:anonymous tal:define="portal_state context/@@plone_portal_state;
                          anonymous python:portal_state.anonymous()"
               tal:condition="not:anonymous">

  <div class="divMenuLogin">
    <div class="loginAdmin"><a href="#" class="setaLogin" tal:define="membro view/getMember">
      <span class="nome">
        <span tal:replace="python:membro.getProperty('razao_social') and 'CPF' or 'CNPJ'">CNPJ</span> <br/>
        <span tal:replace="membro">99.999.999/0001-00</span>
      </span></a>
      <!--<a href="#" title="CADASTRO/LOGIN" class="cadastro">CADASTRO/LOGIN</a>--></div>
      <ul class="menuLogin">
        <li><a href="#" title="Trocar senha" tal:attributes="href string:${context/portal_url}/change-password">Trocar senha</a></li>
        <li><a href="#" title="Sair" tal:attributes="href string:${context/portal_url}/logout">Sair</a></li>
      </ul>
  </div>
</tal:anonymous>

<nav class="menu" tal:define="items view/getMenu">
  <div class="wrap" tal:condition="items">
    <ul>
      <tal:items tal:repeat="item items">
        <li tal:attributes="class python:view.segundoNivel(item) and 'subMenu' or ''"
            tal:condition="not:item/exclude_from_nav">

          <tal:isLink condition="python:item.portal_type=='Link'">
            <a href="#" title="Sobre o Procon" tal:attributes="target python:not blank and '_blank' or '_self';
                                                               href link;
                                                               title item/Title"
                                               tal:define="link python:item.remoteUrl;
                                                           portal_url context/portal_url;
                                                           blank python:link.startswith(portal_url);"
                                               tal:content="item/Title">Sobre o Procon</a>
          </tal:isLink>
          <tal:notLink condition="python:item.portal_type != 'Link'">
            <a href="#" title="Sobre o Procon" tal:attributes="href python:item.absolute_url();
                                                               title item/Title"
                                               tal:content="item/Title">Sobre o Procon</a>

          </tal:notLink>
            <tal:segundoNivel condition="python:view.segundoNivel(item)">
            <ul class="menuNivel">
              <tal:childrens define="childrens python:view.getSegundoNivel(item)" repeat="children childrens">
                <li tal:condition="python:view.checkVisibility(children.getObject()) and not children.exclude_from_nav">
                  <tal:isLink condition="python:children.portal_type=='Link'">
                    <a href="#" tal:define="link python:children.getObject().remoteUrl;
                                            portal_url context/portal_url;
                                            blank python:link.startswith(portal_url)"
                                tal:attributes="href link;
                                                title children/Title;
                                                target python:not blank and '_blank' or '_self'"
                                tal:content="children/Title" />
                  </tal:isLink>
                  <tal:notLink condition="python:children.portal_type != 'Link'">
                    <a href="#" tal:attributes="href python:children.getObject().absolute_url();
                                              title children/Title" tal:content="children/Title" />
                  </tal:notLink>
                </li>
              </tal:childrens>
            </tal:segundoNivel>
        </li>
      </tal:items>
    </ul>
  </div>
</nav>

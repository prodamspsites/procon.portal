<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">
<body>
  <div id="content-core" metal:fill-slot="main">
  <!--RECLAMACOES-->
  <div class="wrapAdmin">
    <div class="divReclamacoes">
      <h1>Fornecedores cadastrados</h1>
      <!-- <span class="total">Total: <span tal:define="perguntas view/buscarPerguntaResposta;" tal:replace="python:perguntas['total']"></span></span> -->

      <div class="filtrarPor"><strong>Filtrar por:</strong>
      <form tal:attributes="action string:${context/portal_url}/buscar_fornecedores" method="GET" name="filtro">
        <select name="coluna" class="selectFilter">
          <option value="-7">Data</option>
          <option value="2">CNPJ</option>
          <option value="-4">SINDEC</option>
          <option value="-1">Data de atualização</option>
          <option value="-2">CPF/CNPJ do operador</option>
        <select>
        <input type="text"  name="filtro" placeholder="Digite um valor para filtrar" class="inputFilter"/>
        <input type="submit" value="FILTRAR" class="btnFiltrar" />
      </form>
    </div>
      <div class="tableReclamacoes">
      <table id="table_id_reclamacoes" class="display">
          <thead>
            <tr>
              <th width="1%" style="display:none">
                <span>.</span>
              </th>
              <th width="17%">
                <span>Data</span>
              </th>
              <th width="40%">
                <span>Razão Social</span>
              </th>
              <th width="23%">
                <span>CNPJ</span>
              </th>
              <th width="20%">
                <span>SINDEC</span>
              </th>
              <th width="10%">
                <span>Operador</span>
              </th>
              <th width="10%">
                <span>Data Atualização</span>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr tal:condition="dados" tal:define="dados view/buscaFornecedor;
                                                  pagination view/getPaginacao; 
                                                  page python: pagination.page;
                                                  offset python:(page*20)-20;
                                                  offset python: offset - 1;  
                                                  "
                                      tal:attributes="rel python:dados[int(repeat.pergunta.number) -1][-7];
                                                      title offset"
                                      tal:repeat="pergunta dados">
              <td tal:attributes="
                                  id python:int(repeat.pergunta.number) +offset;
                                  class python:'categoria fornecedores_buscar';" class="reclamacao_buscar _id"
                  tal:content="python:dados[int(repeat.pergunta.number) -1][-7]">07/06/2016</td>
              <td tal:attributes="id python:int(repeat.pergunta.number) +offset;
                                  class python:'categoria fornecedores_buscar';"
                  tal:content="python:dados[int(repeat.pergunta.number) -1][1]">Cadastro</td>
              <td tal:attributes="id python:int(repeat.pergunta.number) +offset;
                                  class python:'categoria fornecedores_buscar';"
                  tal:content="python:dados[int(repeat.pergunta.number) -1][2]">00998821888</td>
              <td tal:define="lido python:dados[int(repeat.pergunta.number) -1][-4];
                              lido python:lido and 'Sim' or 'Não';"
                  tal:content="lido"></td>
              <td tal:attributes="id python:int(repeat.pergunta.number) +offset;
                                  class python:'categoria fornecedores_buscar';"
                  tal:define="userId python:dados[int(repeat.pergunta.number) -1][-2];
                              membership python:context.portal_membership;
                              user python:membership.getMemberById(userId)">
                  <span tal:condition="user" tal:content="python:user.getProperty('fullname') or user" />

              </td>
              <td tal:attributes="id python:int(repeat.pergunta.number) +offset;
                                  class python:'categoria fornecedores_buscar';"
                  tal:define="atualizacao python:dados[int(repeat.pergunta.number) -1][-1];
                              atualizacao python:atualizacao and atualizacao or '';"
                  tal:content="atualizacao"></td>
              <td style="background-color:white !important; border: 0px; display: none">
            </td>
            </tr>
          </tbody>
          <!-- bower:js -->
          <!-- endbower -->
      </table>
      </div>

<tal:result tal:condition="perguntas" tal:define="perguntas view/buscaFornecedor">
<div class="paginationReclamacoes">

    <div class="col s12 center-align">
        <ul class="paginacao" tal:define="pagination view/getPaginacao">
            <tal:paginacao condition="python:pagination.pages">
              <span style="float: left">Página <tal:page tal:content="python:pagination.page">1</tal:page> de <tal:pages tal:content="python:pagination.pages">100</tal:pages></span>
            </tal:paginacao>
            <tal:paginas tal:repeat="page python:pagination.iter_pages()">
                <tal:page condition="page">
                    <li class="waves-effect show-page" style="float: left; margin-bottom: 20px; list-style-type: none;"><a href="#" tal:attributes="href python: portal_url + '/buscar_fornecedores/' + '?pg=' + str(page)" tal:content="page">1</a></li>
                </tal:page>
                <tal:notPage condition="python: not page">
                  <li style="float: left; margin-bottom: 20px; list-style-type: none;"><span>...</span></li>
                </tal:notPage>
               <tal:pagina>
            </tal:paginas>
            <tal:hasNext condition="python:pagination.has_next">
              <li class="pag-prox waves-effect show-page" style="float: left; margin-bottom: 20px; list-style-type: none;"><a href="#" tal:attributes="href python: portal_url + '/buscar_fornecedores/' + '?pg=' + str(pagination.page +1)">></a></li>
            </tal:hasNext>

        </ul>
    </div>


</div>
</tal:result>

    </div>
  </div>
  <!--RECLAMACOES-->
  </div>

</body>
</html>

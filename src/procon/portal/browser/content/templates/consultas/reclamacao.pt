<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">
<body>
  <div id="content-core" metal:fill-slot="main">
  <span class="currentUser" tal:content="user/getUserName" />
  <!--RECLAMACOES-->
  <div class="wrapAdmin">
    <div class="divReclamacoes">
      <h1>Reclamações recebidas</h1>
      <!-- <span class="total">Total: <span tal:define="perguntas view/buscarPerguntaResposta;" tal:replace="python:perguntas['total']"></span></span> -->

      <div class="filtrarPor"><strong>Filtrar por:</strong>
      <form tal:attributes="action string:${context/portal_url}/buscar_reclamacoes" method="GET" name="filtro">
        <select class="selectFilter"><option>Nome</option><select>
        <input type="text"  name="filtro" placeholder="Digite um valor para filtrar" class="inputFilter"/>
        <input type="submit" value="FILTRAR" class="btnFiltrar" />
      </form>
    </div>
      <div class="tableReclamacoes">
      <table id="table_id_reclamacoes" class="display" style='border:0px'>
          <thead>
            <tr>
              <th width="1%" style="display:none">
                <span>.</span>
              </th>
              <th width="12%">
                <span>Data</span>
              </th>
              <th width="18%">
                <span>Tipo de cadastro</span>
              </th>
              <th width="13%">
                <span>Protocolo</span>
              </th>
              <th width="20%">
                <span>Nome</span>
              </th>
              <th width="1%" style="display:none">
                <span>.</span>
              </th>
              <th width="15%">
                <span>SINDEC</span>
              </th>
              <th width="22%">
                <span>FA</span>
              </th>
            </tr>
          </thead>
          <tbody style="border:0px">
            <tr tal:condition="dados" tal:define="dados view/buscaReclamacao" tal:repeat="pergunta dados">
              <td class="reclamacao_buscar _id" tal:content="python:dados[int(repeat.pergunta.number) -1][-7]">07/06/2016</td>
              <td tal:attributes="class python:'categoria reclamacao_buscar'"
                  tal:define="userId python:dados[int(repeat.pergunta.number) -1][0];
                                       membership python:context.portal_membership;
                                       user python:membership.getMemberById(userId)"
                  tal:content="python:user.getProperty('razao_social') and 'Pessoa jurídica' or 'Pessoa física'">Cadastro</td>
              <td tal:attributes="class python:'pergunta reclamacao_buscar'"
                  tal:content="python:dados[int(repeat.pergunta.number) -1][-6]">00998821888</td>
              <td tal:attributes="class python:'usuario reclamacao_buscar'"
                  tal:define="userId python:dados[int(repeat.pergunta.number) -1][0];
                                       membership python:context.portal_membership;
                                       user python:membership.getMemberById(userId)"
                  tal:content="python:user.getProperty('razao_social') or user.getProperty('fullname') or user">Admin</td>
              <td tal:define="lido python:dados[int(repeat.pergunta.number) -1][-4];
                              lido python:lido and 'Sim' or 'Não';"
                  tal:content="lido"></td>
              <td tal:define="FA python:dados[int(repeat.pergunta.number) -1][-5];
                              FA python:FA and FA or '';"
                  tal:content="FA"></td>
              <td class="td_interno" style="display:none">
              <div class="detalhesDuvida" style="display:none">

                      <div class="detalhesDuvida userInfo"
                           tal:define="userId python:dados[int(repeat.pergunta.number) -1][0];
                                       membership python:context.portal_membership;
                                       user python:membership.getMemberById(userId)">
                        <strong class="tituloConsumidor">Nome</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:user.getProperty('fullname') or user"></span>
                          </div>

                        <strong class="tituloConsumidor">CPF</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:user.getProperty('cpf')"></span>
                          </div>

                        <strong class="tituloConsumidor">Municipio</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:user.getProperty('cidade')"></span>
                          </div>

                        <strong class="tituloConsumidor">Unidade Federativa</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:user.getProperty('unidade_federativa')"></span>
                          </div>

                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Nome da empresa/fornecedor</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][1]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">CNPJ/CPF:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][3]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">CEP:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][5]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Logradouro:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][6]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Número/Complemento:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][7]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Bairro:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][8]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Cidade:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][9]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">UF:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][10]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">DDD + Telefone:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][11]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Site:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][12]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">E-mail:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][13]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Você procurou a empresa para solucionar o problema?</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][20]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida" tal:condition="python:dados[int(repeat.pergunta.number) -1][14] == 'Sim'">
                        <strong class="tituloConsumidor">Informe como foi o seu contato com a empresa. indique o(s) número(s) de protocolo(s), caso o(s) possua:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][15]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida" tal:condition="python:dados[int(repeat.pergunta.number) -1][14] == 'Não'">
                        <strong class="tituloConsumidor">Informe por que você não procurou a empresa para resolver o seu problema:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][16]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Como você comprou/contratou?</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][16]">python:dados[int(repeat.pergunta.number) -1][17]</span>
                          </div>
                      </div>


                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Área relativa ao produto/serviço reclamado</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][23]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida" tal:condition="python:dados[int(repeat.pergunta.number) -1][19] == 'Alimentos'">
                        <strong class="tituloConsumidor">Assinale o tipo de problema apresentado:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][22]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida" tal:condition="python:dados[int(repeat.pergunta.number) -1][19] == 'Assuntos Financeiros'">
                        <strong class="tituloConsumidor">Assinale o tipo de problema apresentado:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][23]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida" tal:condition="python:dados[int(repeat.pergunta.number) -1][19] == 'Habitação'">
                        <strong class="tituloConsumidor">Assinale o tipo de problema apresentado:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][24]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida" tal:condition="python:dados[int(repeat.pergunta.number) -1][19] == 'Produtos'">
                        <strong class="tituloConsumidor">Assinale o tipo de problema apresentado:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][25]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida" tal:condition="python:dados[int(repeat.pergunta.number) -1][19] == 'Saúde'">
                        <strong class="tituloConsumidor">Assinale o tipo de problema apresentado:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][26]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida" tal:condition="python:dados[int(repeat.pergunta.number) -1][19] == 'Serviços Essenciais'">
                        <strong class="tituloConsumidor">Assinale o tipo de problema apresentado:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][27]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida" tal:condition="python:dados[int(repeat.pergunta.number) -1][19] == 'Serviços Privados'">
                        <strong class="tituloConsumidor">Assinale o tipo de problema apresentado:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][28]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Quando você comprou o produto ou contratou o serviço?</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][14]">python:dados[int(repeat.pergunta.number) -1][30]</span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Dados relativos à compra do produto ou contratação de serviço</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][24]"></span>
                          </div>
                      </div>


                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Qual o valor total do produto/serviço?</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][15]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Qual a condição de pagamento do produto ou serviço contratado?</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][16]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida" tal:condition="python:dados[int(repeat.pergunta.number) -1][17]">
                        <strong class="tituloConsumidor">Quantidade de parcelas:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][17]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida" tal:condition="python:dados[int(repeat.pergunta.number) -1][18]">
                        <strong class="tituloConsumidor">Valor da parcela:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][18]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Indique o meio de pagamento do produto/serviço reclamado</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][19]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">O produto ou serviço foi pago por você, no seu CPF ?</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][20]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida" tal:condition="python:dados[int(repeat.pergunta.number) -1][21]">
                        <strong class="tituloConsumidor">Indique o CPF da pessoa que pagou o produto/serviço:</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][21]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Quando o produto ou serviço apresentou problema?</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][25]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Descreva sua reclamação no campo abaixo</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][40]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">No campo abaixo, descreva de forma objetiva o seu pedido à empresa.</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][41]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Arquivos anexados</strong>
                           <div class="respostaConsumidor" tal:condition="python:dados[int(repeat.pergunta.number) -1][42] == 'NO UPLOAD'">Sem arquivos anexos
                          </div>
                          <div class="respostaConsumidor" tal:condition="python:dados[int(repeat.pergunta.number) -1][42] != 'NO UPLOAD'">
                            <a href="#" class="fileDownload" tal:content="python:dados[int(repeat.pergunta.number) -1][43]" tal:attributes="data-binary python:dados[int(repeat.pergunta.number) -1][42]; data-mimetype python:dados[int(repeat.pergunta.number) -1][44]"></a>
                          </div>
                      </div>

                      <div class="detalhesDuvida" tal:condition="python:str(dados[int(repeat.pergunta.number) -1][-12]) != 'Selecione'">
                        <strong class="tituloConsumidor">Campos de uso exclusivo para conveniados e ações estratégicas</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][-12]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida" tal:condition="python:dados[int(repeat.pergunta.number) -1][-11]">
                        <strong class="tituloConsumidor">Matrícula/Código</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][-11]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Protocolo</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][-6]"></span>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Atualizar status</strong>
                          <div class="respostaConsumidor">
                            <select id="reclamacao_status"
                                    tal:attributes="rel python:dados[int(repeat.pergunta.number) -1][-6]">
                                <tal:block tal:define="retorno
                                                       python:dados[int(repeat.pergunta.number) -1][-4]"
                                           tal:repeat="record view/reclamacaoStatus">
                                    <option tal:condition="python: record != retorno"
                                            tal:attributes="value record"
                                            tal:content="record"></option>
                                    <option tal:condition="python: record == retorno"
                                            tal:attributes="value record"
                                            tal:content="record"
                                            selected="selected">
                                    </option>
                                </tal:block>
                            </select>
                          </div>
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">SINDEC (Cadastro)</strong>
                          <tal:hasChecked
                            condition="python:not dados[int(repeat.pergunta.number) -1][-3]">

                          <div class="respostaConsumidor">
                            <input tal:attributes="rel python:dados[int(repeat.pergunta.number) -1][-6]" class='lido_reclamacoes' type='checkbox' value='cadastro' />
                          </div>

                          </tal:hasChecked>
                          <tal:Checked
                            condition="python:dados[int(repeat.pergunta.number) -1][-3]">
                          <div class="respostaConsumidor">
                            <input class='lido_reclamacoes' type='checkbox' disabled="disabled" value='cadastro' checked="checked" /> <b>Cadastrado</b>
                          </div>

          </tal:Checked>
                      </div>


                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">FA</strong>
                          <div class="respostaConsumidor">
                            <input tal:attributes="rel python:dados[int(repeat.pergunta.number) -1][-6];
                                                   value python:dados[int(repeat.pergunta.number) -1][-5] or '';
                                                   disabled python:dados[int(repeat.pergunta.number) -1][-5] or False" class='FA_reclamacoes' type='text' value='' />
                          </div>
                      </div>

                      <div class="detalhesDuvida"
                            tal:define="operadorId python:dados[int(repeat.pergunta.number) -1][-2];
                                        membership python:context.portal_membership;
                                        operador python:membership.getMemberById(operadorId);"
                            tal:condition="python:dados[int(repeat.pergunta.number) -1][-2]">
                        <strong class="tituloConsumidor">Operador</strong>

                          <tal:exists condition="python:operador.getProperty('fullname')">
                            <div class="respostaConsumidor">
                              <span tal:content="python:operador.getProperty('fullname')"></span>
                            </div>
                          </tal:exists>

                          <tal:notexists condition="python:not operador.getProperty('fullname')">
                            <div class="respostaConsumidor">
                              <span tal:content="operador"></span>
                            </div>
                          </tal:notexists>

                          <!-- <div class="respostaConsumidor">
                            <span tal:content="python:operador.getProperty('fullname') or operador"></span>
                          </div> -->
                      </div>

                      <div class="detalhesDuvida">
                        <strong class="tituloConsumidor">Data de atualização</strong>
                          <div class="respostaConsumidor">
                            <span tal:content="python:dados[int(repeat.pergunta.number) -1][-1]"></span>
                          </div>
                      </div>
                      <a style="color: white !important" href="" class="context" name="form_submit"
                         tal:attributes="href string:${context/portal_url}/@@buscar_reclamacoes">Enviar</a>

              </div>
            </td>
            </tr>
          </tbody>
          <!-- bower:js -->
          <!-- endbower -->
      </table>
      </div>

      <tal:result tal:condition="perguntas" tal:define="perguntas view/buscaReclamacao">
      <div class="paginationReclamacoes">
      </div>
      </tal:result>
    </div>
  </div>

  </div>

</body>
</html>

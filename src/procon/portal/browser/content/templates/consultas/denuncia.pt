<!-- <tal:dados tal:define="reclamacoes view/buscaDenuncia" tal:repeat="reclamacao reclamacoes">
  <tal:inputs tal:content="structure python:reclamacao[0]">
  <tal:inputs tal:content="structure python:reclamacao[1]">
  <tal:inputs tal:content="structure python:reclamacao[2]">
  <tal:inputs tal:content="structure python:reclamacao[3]">
  <tal:inputs tal:content="structure python:reclamacao[4]">
</tal:dados> -->



<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">
<body>
  <div id="content-core" metal:fill-slot="main">
  <span class="currentUser" tal:content="user/getUserName" />

  <!--RECLAMACOES-->
  <div class="wrapAdmin">
    <div class="divReclamacoes">
      <h1>Denúncias recebidas</h1>
      <!-- <span class="total">Total: <span tal:define="perguntas view/buscarPerguntaResposta;" tal:replace="python:perguntas['total']"></span></span> -->

      <div class="filtrarPor"><strong>Filtrar por:</strong>
      <form tal:attributes="action string:${context/portal_url}/buscar_denuncias" method="GET" name="filtro">
        <select name="coluna" class="selectFilter">
          <option value="-8">Consumidor</option>
          <option value="-5">CPF/CNPJ do consumidor</option>
          <option value="2">Fornecedor</option>
          <option value="3">CPF/CNPJ do fornecedor</option>
          <option value="-9">Status</option>
          <option value="-11">Data da denúncia</option>
          <option value="-1">Data de atualização</option>
        <select>
        <input type="text"  name="filtro_nome" placeholder="Digite um valor para filtrar" class="inputFilter"/>
        <input type="submit" value="FILTRAR" class="btnFiltrar" />
      </form>
    </div>
      <div class="tableReclamacoes">
      <table id="table_id_reclamacoes" class="display" width="100%">
          <thead>
            <tr>
              <th width="32%">
                <span>Consumidor</span>
              </th>
              <th width="32%">
                <span>CPF/CNPJ do consumidor</span>
              </th>
              <th width="32%">
                <span>Fornecedor</span>
              </th>
              <th width="32%">
                <span>CPF/CNPJ do fornecedor denunciado</span>
              </th>
              <th width="15%">
                <span>Status</span>
              </th>
              <th width="15%">
                <span>Data da denúncia</span>
              </th>
              <th width="15%">
                <span>Data da atualização</span>
              </th>
              <th width="1%" style="display:none">
                <span>.</span>
              </th>
            </tr>
          </thead>
          <tbody>
            <tal:row tal:condition="dados" tal:define="dados view/buscaDenuncia;
                                                       pagination view/getPaginacao; 
                                                       page python: pagination.page;
                                                       offset python:(page*20) -20;
                                                       offset python: offset -1" tal:repeat="pergunta dados"> 
              <tr tal:condition="python:view.showDenuncias(pergunta)">
                <td tal:attributes="id python:int(repeat.pergunta.number) +offset;
                                    class python:'categoria denuncias_buscar';"
                    tal:content="python:dados[int(repeat.pergunta.number) -1][-8]">Admin</td>
                <td tal:attributes="rel python:dados[int(repeat.pergunta.number) -1][-10];
                                    id python:int(repeat.pergunta.number) +offset;
                                    class python:'categoria denuncias_buscar';" class="denuncias_buscar _id"
                    tal:content="python:dados[int(repeat.pergunta.number) -1][-5]">CPF/CNPJ do consumidor</td>
                <td tal:attributes="rel python:dados[int(repeat.pergunta.number) -1][-10];
                                    id python:int(repeat.pergunta.number) +offset;
                                    class python:'categoria denuncias_buscar';" class="denuncias_buscar _id"
                    tal:content="python:dados[int(repeat.pergunta.number) -1][1]">Fornecedor</td>
                <td tal:attributes="rel python:dados[int(repeat.pergunta.number) -1][-10];
                                    id python:int(repeat.pergunta.number) +offset;
                                    class python:'categoria denuncias_buscar';" class="denuncias_buscar _id"
                    tal:content="python:dados[int(repeat.pergunta.number) -1][3]">CPF/CNPJ do fornecedor</td>
                <td tal:define="lido python:dados[int(repeat.pergunta.number) -1][-4];
                                lido python:lido and 'Sim' or 'Não';"
                    tal:content="lido"></td>
                <td tal:attributes="rel python:dados[int(repeat.pergunta.number) -1][-10];
                                    id python:int(repeat.pergunta.number) +offset;
                                    class python:'categoria denuncias_buscar';" class="denuncias_buscar _id"
                    tal:content="python:dados[int(repeat.pergunta.number) -1][-11]">Data da denúncia</td>
                <td tal:attributes="rel python:dados[int(repeat.pergunta.number) -1][-10];
                                    id python:int(repeat.pergunta.number) +offset;
                                    class python:'categoria denuncias_buscar';" class="denuncias_buscar _id"
                    tal:content="python:dados[int(repeat.pergunta.number) -1][-1]">CPF/CNPJ do fornecedor</td>
                <td style="background-color:white !important; border: 0px; display: none"></td>
              </tr>
            </tal:row>
          </tbody>
          <!-- bower:js -->
          <!-- endbower -->
      </table>
      </div>


<tal:result tal:condition="perguntas" tal:define="perguntas view/buscaDenuncia">
<div class="paginationReclamacoes">

    <div class="col s12 center-align">
        <ul class="paginacao" tal:define="pagination view/getPaginacao">
            <tal:paginacao condition="python:pagination.pages">
              <span style="float: left">Página <tal:page tal:content="python:pagination.page">1</tal:page> de <tal:pages tal:content="python:pagination.pages">100</tal:pages></span>
            </tal:paginacao>
            <tal:paginas tal:repeat="page python:pagination.iter_pages()">
                <tal:page condition="page">
                    <li class="waves-effect show-page" style="float: left; margin-bottom: 20px; list-style-type: none;"><a href="#" tal:attributes="href python: portal_url + '/buscar_denuncias/' + '?pg=' + str(page)" tal:content="page">1</a></li>
                </tal:page>
                <tal:notPage condition="python: not page">
                  <li style="float: left; margin-bottom: 20px; list-style-type: none;"><span>...</span></li>
                </tal:notPage>
               <tal:pagina>
            </tal:paginas>
            <tal:hasNext condition="python:pagination.has_next">
              <li class="pag-prox waves-effect show-page" style="float: left; margin-bottom: 20px; list-style-type: none;"><a href="#" tal:attributes="href python: portal_url + '/buscar_denuncias/' + '?pg=' + str(pagination.page +1)">></a></li>
            </tal:hasNext>

        </ul>
    </div>


</div>
</tal:result>

    </div>
  </div>
  </div>

</body>
</html>

